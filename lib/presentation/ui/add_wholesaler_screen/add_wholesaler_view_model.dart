import 'package:bingo_wholesale/const/app_strings.dart';import 'package:bingo_wholesale/data_models/construction_model/wholesaler_data.dart';import 'package:bingo_wholesale/repository/repository_components.dart';import 'package:bingo_wholesale/repository/repository_retailer.dart';import 'package:bingo_wholesale/services/navigation/navigationService.dart';import 'package:flutter/cupertino.dart';import 'package:stacked/stacked.dart';import '../../../app/locator.dart';import '../../../data_models/models/component_models/partner_with_currency_list.dart';// import '../../../data_models/models/component_models/partner_with_currency_list.dart';class AddWholesalerViewModel extends ReactiveViewModel {  AddWholesalerViewModel() {    getWholesalers();  }  final RepositoryRetailer _repositoryRetailer = locator<RepositoryRetailer>();  final RepositoryComponents _repositoryComponents =      locator<RepositoryComponents>();  final NavigationService _navigationService = locator<NavigationService>();  String submitButton = AppString.submitButton;  String selectWholesaler = AppString.selectWholesaler;  String selectCurrency = AppString.selectCurrency;  String visitFrequency = AppString.visitFrequency;  TextEditingController purchaseController = TextEditingController();  TextEditingController averageTicketController = TextEditingController();  TextEditingController amountController = TextEditingController();  List<WholesalersData> _creditLineInformation = [];  List<WholesalersData> get creditLineInformation => _creditLineInformation;  PartnerWithCurrencyList _allWholesalers = PartnerWithCurrencyList();  PartnerWithCurrencyList get allWholesalers => _allWholesalers;  WholesalersData wholesalerData = WholesalersData();  bool isNew = true;  void setDetails(WholesalersData arguments) {    print(arguments.monthlyPurchase);    wholesalerData = arguments;    submitButton = AppString.update;    isNew = false;    preFix(arguments);    notifyListeners();  }  void getWholesalers() async {    setBusy(true);    notifyListeners();    _allWholesalers = await _repositoryComponents.getWholesalerWithCurrenct();    setBusy(false);    notifyListeners();  }  preFix(WholesalersData data) {    print(creditLineInformation.length);    selectWholesaler = data.wholesaler!;    selectCurrency = data.currency!;    visitFrequency = data.visitFrequency!;    purchaseController.text = data.monthlyPurchase!;    averageTicketController.text = data.averageTicket!;    amountController.text = data.amount!;    notifyListeners();  }  void changeSelectWholesaler(String v) {    selectWholesaler = v;    notifyListeners();  }  void changeSelectCurrency(String v) {    selectCurrency = v;    notifyListeners();  }  void changeVisitFrequency(String v) {    visitFrequency = v;    notifyListeners();  }  void addWholesaler() {    print(purchaseController.text);    print(averageTicketController.text);    print(amountController.text);    WholesalersData item = WholesalersData(        id: DateTime.now().microsecondsSinceEpoch.toString(),        wholesaler: selectWholesaler,        currency: selectCurrency,        monthlyPurchase: purchaseController.text,        averageTicket: averageTicketController.text,        visitFrequency: visitFrequency,        amount: amountController.text);    _repositoryRetailer.addCreditLineInformation(item);    _navigationService.pop();  }  void updateWholesaler() {    WholesalersData item = WholesalersData(        id: wholesalerData.id!,        wholesaler: selectWholesaler,        currency: selectCurrency,        monthlyPurchase: purchaseController.text,        averageTicket: averageTicketController.text,        visitFrequency: visitFrequency,        amount: amountController.text);    _repositoryRetailer.updateWholesaler(wholesalerData.id!, item);    _navigationService.pop();  }  void removeCreditLineInformation() {    _repositoryRetailer.removeCreditLineInformation(wholesalerData.id!);    _navigationService.pop();  }  @override  List<ReactiveServiceMixin> get reactiveServices => [_repositoryRetailer];}